# 第八章 虚拟机字节码执行引擎

## 1. 运行时栈帧的结构

* **1.1 栈帧的描述**
    > 栈帧是用于支持虚拟机进行方法调用和方法执行的数据结构，它是虚拟机运行时数据区中虚拟机栈的栈元素。栈帧中存储了**方法的局部变量表 、操作数栈 、动态连接和方法返回地址**等信息
* **1.2 局部变量表**
    > 是一组变量值的存储空间，用于存放方法参数和方法内部定义的局部变量
    > * 局部变量表的最小单位 ：变量槽 ( Variable Slot ，简称 Slot )
    > * 在方法执行时，虚拟机是使用局部变量表完成参数值到参数变量列表的传递过程的
    > * 如果执行的是**实例方法**，变量表中的**第0位索引**默认用于传递方法所属对象实例的引用
* **1.3 操作数栈**
    > 也称为操作栈，是一个后入先出固定大小的栈
    > * 当一个方法刚刚开始执行的时候，这个方法的操作数栈是空，在方法的执行过程中伴随着操作数的出栈入栈
* **1.4 动态连接**
    > 每个栈帧都包含一个**指向运行时常量池中该栈帧所属方法的引用**，持有这个引用是为了支持方法调用过程中的**动态连接**
    > * 将符号引用在**运行期间**转换为直接引用，即**动态连接**
* **1.4 方法返回地址**
    > 当一个方法执行后，只有两种方式可以退出这个方法
    >   * 执行引擎遇到任意一个方法**返回的字节码指令** , 称为正常完成出口
    >   * 在方法执行的过程中遇到了**异常** ，并且这个异常没有在方法体内得到处理 , 称为异常完成出口
    >
    > 在方法退出后，都需要返回到方法被调用的位置。
    >   * 一般来说，方法正常退出，调用者的**PC计数器的值**可以当作返回地址
    >   * 方法异常退出时，返回地址是要**通过异常处理器表**来确定的

## 2. 方法调用

* **2.1 概述**
    > 方法调用阶段的唯一任务就是确定被调用方法的版本 ( 即调用哪一个方法 )，不涉及具体的方法内部运行过程
* **2.2 解析**

